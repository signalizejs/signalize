<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>

<body>

	<form data-ref="form">
		<input data-ref="input" min="0" type="number">
		<button>Add</button>
	</form>
	<ul data-ref="list"></ul>

	<a role="button" data-dialog-open="cart">Open cart</a>

	<dialog data-dialog="cart">
		<a role="button" data-dialog-close>Close</a>
	</dialog>

	<script type="module">
		import { on, signal, bind, h, ref } from './dist/index.js';

		const todoItems = signal([]);
		const todoLength = signal(todoItems.get().length);
		const paragraphColor = signal('color:green');

		on('submit', ref('form'), (event) => {
			event.preventDefault();
			const input = ref('input');
			const newItems = [];

			while(input.value --) {
				newItems.push(h('li', {}, input.value));
			}

			todoItems.set(newItems.reverse());
			todoLength.set(todoItems.get().length);
			input.value = '';
			paragraphColor.set(todoLength > 3 ? 'color:red' : 'color:green');
		});

		ref('list').replaceWith(
			h('div', {}, [
				h('ul', {}, todoItems),
				h(
					'p',
					{ style: paragraphColor },
					'Count is: ', todoLength, ' items'
				)
			])
		);
	</script>

</body>

</html>
