<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta snippet="spa-cache-control" name="spa-cache-control" content="cache">
	<title snippet="title">Index page</title>
</head>

<body>
	<style>
		[cloak] {
			visibility: hidden;
		}
	</style>

	<script type="module">
		import Signalize from 'signalizejs';
		import directives from 'signalizejs/directives';
		import domTraverser from 'signalizejs/traverse-dom';
		import evaluator from 'signalizejs/evaluator';

		// Use the directives plugin
		const { component, signal, on, select, scope } = new Signalize({
		});

		component('x-button', {
			setup({ $ref, $child, $connected, $disconnected }) {
				const form = $ref('form');
				const number = signal(2);

				$child('x-form').then((elscop) => {
					console.log(elscop);
				});

				return {
					number
				}
			},
		});

		setTimeout(() => {
			component('x-form', {
				async setup() {
					await new Promise((resolve) => {
						setTimeout(() => {
							resolve();
							console.log('meh');
						}, 3000);
					})
				}
			});
			console.log('set');
		}, 2000);

	</script>
</body>

	<x-button>
		<x-form ref="form">
			<input />
		</x-form>
	</x-button>
</html>
